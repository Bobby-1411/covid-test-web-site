<!--# include file="header-page.html" -->

<main class="page-content">
  <div id="form" class="container content">
   <form action="fcgi-register" method="post">
    <h3>Please enter the code printed on your test tube:</h3>
    <hr>
    <div class="form-group bmd-form-group">
      <label for="bcode" class="bmd-label-floating">Code on the tube</label>
      <div class="input-group">
        <input type="text" class="form-control col-5" placeholder="Click the button to scan the barcode" id="bcode" name="bcode" required>
        <span class="input-group-btn input-group-append">
            <button class="btn btn-default" type="button" data-toggle="modal" data-target="#livestream_scanner">
              <i class="material-icons">qr_code_scanner</i>
            </button>
          </span>
       </div>
      <small id="bcodehelp" class="form-text text-muted">
      If you did not receive a test tube, please see <a href="no-tube.html">here </a>.
      </small>
    </div>

        <p> If your sample should turn out to be positive, the public health office (Gesundheitsamt) will need to contact you. Therefore, please provide your contact details: </p>

        <div class="form-group bmd-form-group">
          <label for="name" class="bmd-label-floating">Full Name</label>
          <input type="text" id="name" class="form-control" name="name" required>
        </div>
        <div class="form-group bmd-form-group">
          <label for="address" class="bmd-label-floating">Address (street, number, city)</label>
          <textarea type="text" id="address" class="form-control" name="address" rows="3" required></textarea>
        </div>
        <div class="form-group bmd-form-group">
          <label for="contact" class="bmd-label-floating">Phone number or Email address</label>
          <input type="text" id="contact" class="form-control" name="contact" rows="4" required>
        </div>

        <p> <small> Note regarding protection of personal data: Your name and your contact details will be kept strictly confidential. Only employees of the public health office will have access. </small> </p>

        <p> To access your test result, you will need to enter a the barcode on your tube and a password. Please choose the password now: </p>
        <div class="form-group bmd-form-group">
          <label for="psw" class="bmd-label-floating">Password</label>
          <input type="password" class="form-control" name="psw"  required onchange="form.psw-repeat.pattern = RegExp.escape(this.value);">
        </div>
        <div class="form-group bmd-form-group">
          <label for="psw-repeat" class="bmd-label-floating"><b>Please type your password again:</b></label>
          <input type="password" class="form-control" name="psw-repeat" required>
        </div>
        <div>
            <a href="index.html" id="closeform" class="button-small">Cancel</a>
            <button type="submit" class="button-small">Submit</button>
        </div>
    </form>
  </div>



 <div class="modal" id="livestream_scanner">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Please place the barcode on your tube in the frame:</h4>
      </div>
      <div class="modal-body" style="position: static">
        <div id="interactive" class="viewport"></div>
        <div class="error"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="button-small" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--# include file="footer-page.html" -->

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/serratus/quaggaJS/0420d5e0/dist/quagga.min.js"></script>
<style>
	#interactive.viewport {position: relative; width: 100%; height: auto; overflow: hidden; text-align: center;}
	#interactive.viewport > canvas, #interactive.viewport > video {max-width: 100%;width: 100%;}
	canvas.drawing, canvas.drawingBuffer {position: absolute; left: 0; top: 0;}
</style>
<script src="../Style/js/barcode_scanner.js" type="text/javascript"></script>

<script type="text/javascript">

  // polyfill for RegExp.escape
  if(!RegExp.escape) {
    RegExp.escape = function(s) {
      return String(s).replace(/[\\^$*+?.()|[\]{}]/g, '\\$&');
    };
  }

</script>

</body>
</html>
