{% extends "base.html" %} {% block content %}
<div id="form" class="container content">
  <form action="{{ url_for('site.results_query') }}" method="post">
    {{ form.csrf_token }}
    <h3>
      {% trans %}Hier können Sie das Ergebnis Ihres Covid19-Tests abfragen:{%
      endtrans %}
    </h3>
    <div class="form-group bmd-form-group">
      <label for="bcode" class="bmd-label-floating"
        >{% trans %}Code auf dem Röhrchen{% endtrans %}</label
      >
      <div class="input-group">
        <input
          type="text"
          class="form-control col-8"
          placeholder="Klicken Sie auf die Schaltfläche, um den Barcode zu scannen"
          id="bcode"
          name="bcode"
          required
        />
        {% for error in form.bcode.errors %}
        <small class="text-danger">{{ error }}</small>
        {% endfor %}
        <span class="input-group-btn input-group-append">
          <button
            class="btn btn-default"
            type="button"
            data-toggle="modal"
            data-target="#livestream_scanner"
          >
            <i class="material-icons">qr_code_scanner</i>
          </button>
        </span>
      </div>
      <small id="bcodehelp" class="form-text text-muted">
        {% trans %}wie er auf Ihrem Röhrchen aufgedruckt war{% endtrans %}
      </small>
    </div>
    <div class="form-group">
      <label for="psw">{% trans %}Ihr Passwort:{% endtrans %}</label>
      <input type="password" name="psw" class="form-control col-8" required />
      {% for error in form.psw.errors %}
      <small class="text-danger">{{ error }}</small>
      {% endfor %}
      <small id="passwordhelp" class="form-text text-muted">
        {% trans %}wie Sie es bei der Eingabe Ihrer Daten gewählt haben{%
        endtrans %}
      </small>
    </div>
    <div>
      <a href="{{ url_for('site.index') }}" id="closeform" class="button-small"
        >Zurück</a
      >
      <button type="submit" class="button-small">
        {% trans %}Ergebnis anzeigen{% endtrans %}
      </button>
    </div>
  </form>
</div>
<div class="modal" id="livestream_scanner">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">
          {% trans %}Bitte platzieren Sie den Code auf Ihrem Proben-Röhrchen im
          Rahmen:{% endtrans %}
        </h4>
      </div>
      <div class="modal-body" style="position: static">
        <div id="interactive" class="viewport"></div>
        <div class="error"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="button-small" data-dismiss="modal">
          {% trans %}Schließen{% endtrans %}
        </button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
  crossorigin="anonymous"
></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"
></script>
<script
  src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
  crossorigin="anonymous"
></script>
<script src="https://cdn.rawgit.com/serratus/quaggaJS/0420d5e0/dist/quagga.min.js"></script>
<style>
  #interactive.viewport {
    position: relative;
    width: 100%;
    height: auto;
    overflow: hidden;
    text-align: center;
  }
  #interactive.viewport > canvas,
  #interactive.viewport > video {
    max-width: 100%;
    width: 100%;
  }
  canvas.drawing,
  canvas.drawingBuffer {
    position: absolute;
    left: 0;
    top: 0;
  }
</style>
<script src="../Style/js/barcode_scanner.js" type="text/javascript"></script>
{% endblock %}
